<!DOCTYPE html>
<html>
        <script>
                const Web3 = require ('web3');
                const web3 = new Web3 ('https://ropsten.infura.io');
                var user = web3.eth.getAccounts();          
            
                const PeopleAddABI = [{
                    "constant": false,
                    "inputs": [
                        {
                            "internalType": "string",
                            "name": "_firstName",
                            "type": "string"
                        },
                        {
                            "internalType": "string",
                            "name": "_lastName",
                            "type": "string"
                        }
                    ],
                    "name": "addPerson",
                    "outputs": [],
                    "payable": false,
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "linkPersoon",
                            "type": "address"
                        }
                    ],
                    "name": "newPersoon",
                    "type": "event"
                },
                {
                    "constant": true,
                    "inputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "name": "people",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "_id",
                            "type": "uint256"
                        },
                        {
                            "internalType": "string",
                            "name": "_firstName",
                            "type": "string"
                        },
                        {
                            "internalType": "string",
                            "name": "_lastName",
                            "type": "string"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "constant": true,
                    "inputs": [],
                    "name": "peopleCount",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "view",
                    "type": "function"
                }];

                function EtherscanLink(pref,link) {
                      return '<a href="https://ropsten.etherscan.io/'+pref+"/"+link+'" target="_blank" >'+link+'</a>';           
                }
            
                const PeopleAddAddress = "0x9F6911475448C50edd4D278b54bb24B9519C3A95";
                const ContractPeopleAdd = new web3.eth.Contract(PeopleAddABI, PeopleAddAddress);

                async function add(){
                    document.getElementById("voegtoe").style.display = "none";
                    var userFirstname = document.getElementById("first").value;
                    var userLastname = document.getElementById("last").value;
                    var gasprice = await web3.eth.getGasPrice() 
                    var toevoegen = await ContractPeopleAdd.methods.addPerson(userFirstname, userLastname).send({from:user, gasprice});
                    document.getElementById("voegtoe").style.display = "block";
                };
                </script>
<body>

<h2>You can add your first and lastname to this contract</h2>
<p>Please fill in your first and lastname!</p>

First name:<br>
<input type="text" name="first" id="first">
<br>
Last name:<br>
<input type="text" name="last" id="last">
<br><br>
<button onclick="add()" id="voegtoe">Click to add</button>

<p>Also note that the default width of a text field is 20 characters.</p>

</body>
</html>
